<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>coreJS-app</title>
    <meta name="description" content="coreJS App Documentation" />
    <meta name="keywords" content="corejs-app" />
    <meta name="keyword" content="corejs-app" />
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content=""/>
    <meta property="og:url" content=""/>
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"coreJS-app","disqus":"","googleAnalytics":"","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"coreJS-app","description":"coreJS App Documentation","keyword":"corejs-app"}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">coreJS-app</a></h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
    
        <li class="item" data-name="app">
            <span class="title">
                <a href="app.html">app</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="app.root"><a href="app.html#root">root</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.jst">
            <span class="title">
                <a href="app.jst.html">app.jst</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.services">
            <span class="title">
                <a href="app.services.html">app.services</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="app.services.arrayScopesToString"><a href="app.services.html#arrayScopesToString">arrayScopesToString</a></li>
            
                <li data-name="app.services.isCrossDomain"><a href="app.services.html#isCrossDomain">isCrossDomain</a></li>
            
                <li data-name="app.services.request"><a href="app.services.html#request">request</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.services.method">
            <span class="title">
                <a href="app.services.method.html">app.services.method</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="app.services.method.DELETE"><a href="app.services.method.html#DELETE">DELETE</a></li>
            
                <li data-name="app.services.method.GET"><a href="app.services.method.html#GET">GET</a></li>
            
                <li data-name="app.services.method.HEAD"><a href="app.services.method.html#HEAD">HEAD</a></li>
            
                <li data-name="app.services.method.OPTIONS"><a href="app.services.method.html#OPTIONS">OPTIONS</a></li>
            
                <li data-name="app.services.method.PATCH"><a href="app.services.method.html#PATCH">PATCH</a></li>
            
                <li data-name="app.services.method.POST"><a href="app.services.method.html#POST">POST</a></li>
            
                <li data-name="app.services.method.PUT"><a href="app.services.method.html#PUT">PUT</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.session">
            <span class="title">
                <a href="app.session.html">app.session</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="app.session.STATUS_SELECTOR"><a href="app.session.html#STATUS_SELECTOR">STATUS_SELECTOR</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="app.session.add"><a href="app.session.html#add">add</a></li>
            
                <li data-name="app.session.destroy"><a href="app.session.html#destroy">destroy</a></li>
            
                <li data-name="app.session.exist"><a href="app.session.html#exist">exist</a></li>
            
                <li data-name="app.session.gatekeeper"><a href="app.session.html#gatekeeper">gatekeeper</a></li>
            
                <li data-name="app.session.get"><a href="app.session.html#get">get</a></li>
            
                <li data-name="app.session.isPersistent"><a href="app.session.html#isPersistent">isPersistent</a></li>
            
                <li data-name="app.session.logged"><a href="app.session.html#logged">logged</a></li>
            
                <li data-name="app.session.removeStatus"><a href="app.session.html#removeStatus">removeStatus</a></li>
            
                <li data-name="app.session.setPersistent"><a href="app.session.html#setPersistent">setPersistent</a></li>
            
                <li data-name="app.session.setStatus"><a href="app.session.html#setStatus">setStatus</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.user">
            <span class="title">
                <a href="app.user.html">app.user</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="app.user.login"><a href="app.user.html#login">login</a></li>
            
                <li data-name="app.user.loginToken"><a href="app.user.html#loginToken">loginToken</a></li>
            
                <li data-name="app.user.logout"><a href="app.user.html#logout">logout</a></li>
            
                <li data-name="app.user.me"><a href="app.user.html#me">me</a></li>
            
                <li data-name="app.user.register"><a href="app.user.html#register">register</a></li>
            
                <li data-name="app.user.registerIAM"><a href="app.user.html#registerIAM">registerIAM</a></li>
            
                <li data-name="app.user.remove"><a href="app.user.html#remove">remove</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.user.statusCode">
            <span class="title">
                <a href="app.user.statusCode.html">app.user.statusCode</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="app.user.statusCode.USER_EXIST"><a href="app.user.statusCode.html#USER_EXIST">USER_EXIST</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.utils">
            <span class="title">
                <a href="app.utils.html">app.utils</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="app.utils.isIE8"><a href="app.utils.html#isIE8">isIE8</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="app.utils.getCenteredPopup"><a href="app.utils.html#getCenteredPopup">getCenteredPopup</a></li>
            
                <li data-name="app.utils.getHashParams"><a href="app.utils.html#getHashParams">getHashParams</a></li>
            
                <li data-name="app.utils.getQueryParams"><a href="app.utils.html#getQueryParams">getQueryParams</a></li>
            
                <li data-name="app.utils.popup"><a href="app.utils.html#popup">popup</a></li>
            
                <li data-name="app.utils.redirect"><a href="app.utils.html#redirect">redirect</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.utils.isMobile">
            <span class="title">
                <a href="app.utils.isMobile.html">app.utils.isMobile</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="app.utils.isMobile.Android"><a href="app.utils.isMobile.html#Android">Android</a></li>
            
                <li data-name="app.utils.isMobile.any"><a href="app.utils.isMobile.html#any">any</a></li>
            
                <li data-name="app.utils.isMobile.BlackBerry"><a href="app.utils.isMobile.html#BlackBerry">BlackBerry</a></li>
            
                <li data-name="app.utils.isMobile.iOS"><a href="app.utils.isMobile.html#iOS">iOS</a></li>
            
                <li data-name="app.utils.isMobile.Opera"><a href="app.utils.isMobile.html#Opera">Opera</a></li>
            
                <li data-name="app.utils.isMobile.Windows"><a href="app.utils.isMobile.html#Windows">Windows</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="app.validate">
            <span class="title">
                <a href="app.validate.html">app.validate</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="app.validate.isDefined"><a href="app.validate.html#isDefined">isDefined</a></li>
            
                <li data-name="app.validate.isGreaterThan"><a href="app.validate.html#isGreaterThan">isGreaterThan</a></li>
            
                <li data-name="app.validate.isGreaterThanOrEqual"><a href="app.validate.html#isGreaterThanOrEqual">isGreaterThanOrEqual</a></li>
            
                <li data-name="app.validate.isNotNull"><a href="app.validate.html#isNotNull">isNotNull</a></li>
            
                <li data-name="app.validate.isValue"><a href="app.validate.html#isValue">isValue</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="common">
            <span class="title">
                <a href="common.html">common</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="common.serializeParams"><a href="common.html#serializeParams">serializeParams</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ec">
            <span class="title">
                <a href="ec.html">ec</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ec.order"><a href="ec.html#order">order</a></li>
            
                <li data-name="ec.paymentMethod"><a href="ec.html#paymentMethod">paymentMethod</a></li>
            
                <li data-name="ec.product"><a href="ec.html#product">product</a></li>
            
                <li data-name="ec.purchase"><a href="ec.html#purchase">purchase</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="evci">
            <span class="title">
                <a href="evci.html">evci</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="evci.event"><a href="evci.html#event">event</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="iam">
            <span class="title">
                <a href="iam.html">iam</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="iam.token"><a href="iam.html#token">token</a></li>
            
                <li data-name="iam.user"><a href="iam.html#user">user</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="oauth">
            <span class="title">
                <a href="oauth.html">oauth</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="oauth.URL_ENCODED"><a href="oauth.html#URL_ENCODED">URL_ENCODED</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="oauth.authorization"><a href="oauth.html#authorization">authorization</a></li>
            
                <li data-name="oauth.token"><a href="oauth.html#token">token</a></li>
            
                <li data-name="oauth.user"><a href="oauth.html#user">user</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="resources">
            <span class="title">
                <a href="resources.html">resources</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="resources.collection"><a href="resources.html#collection">collection</a></li>
            
                <li data-name="resources.relation"><a href="resources.html#relation">relation</a></li>
            
                <li data-name="resources.resource"><a href="resources.html#resource">resource</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="resources.sort">
            <span class="title">
                <a href="resources.sort.html">resources.sort</a>
                
                <span class="static">static</span>
                
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li data-name="resources.sort.ASC"><a href="resources.sort.html#ASC">ASC</a></li>
            
                <li data-name="resources.sort.DESC"><a href="resources.sort.html#DESC">DESC</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ec.OrderBuilder">
            <span class="title">
                <a href="ec.OrderBuilder.html">ec.OrderBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ec.OrderBuilder.OrderBuilder#checkout"><a href="ec.OrderBuilder.html#OrderBuilder#checkout">OrderBuilder#checkout</a></li>
            
                <li data-name="ec.OrderBuilder.OrderBuilder#delete"><a href="ec.OrderBuilder.html#OrderBuilder#delete">OrderBuilder#delete</a></li>
            
                <li data-name="ec.OrderBuilder.OrderBuilder#get"><a href="ec.OrderBuilder.html#OrderBuilder#get">OrderBuilder#get</a></li>
            
                <li data-name="ec.OrderBuilder.OrderBuilder#prepare"><a href="ec.OrderBuilder.html#OrderBuilder#prepare">OrderBuilder#prepare</a></li>
            
                <li data-name="ec.OrderBuilder.OrderBuilder#update"><a href="ec.OrderBuilder.html#OrderBuilder#update">OrderBuilder#update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ec.PaymentMethodBuilder">
            <span class="title">
                <a href="ec.PaymentMethodBuilder.html">ec.PaymentMethodBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ec.PaymentMethodBuilder.PaymentMethodBuilder#create"><a href="ec.PaymentMethodBuilder.html#PaymentMethodBuilder#create">PaymentMethodBuilder#create</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ec.PaymentMethodIdBuilder">
            <span class="title">
                <a href="ec.PaymentMethodIdBuilder.html">ec.PaymentMethodIdBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ec.PaymentMethodIdBuilder.PaymentMethodIdBuilder#delete"><a href="ec.PaymentMethodIdBuilder.html#PaymentMethodIdBuilder#delete">PaymentMethodIdBuilder#delete</a></li>
            
                <li data-name="ec.PaymentMethodIdBuilder.PaymentMethodIdBuilder#get"><a href="ec.PaymentMethodIdBuilder.html#PaymentMethodIdBuilder#get">PaymentMethodIdBuilder#get</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ec.ProductBuilder">
            <span class="title">
                <a href="ec.ProductBuilder.html">ec.ProductBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ec.ProductBuilder.ProductBuilder#create"><a href="ec.ProductBuilder.html#ProductBuilder#create">ProductBuilder#create</a></li>
            
                <li data-name="ec.ProductBuilder.ProductBuilder#delete"><a href="ec.ProductBuilder.html#ProductBuilder#delete">ProductBuilder#delete</a></li>
            
                <li data-name="ec.ProductBuilder.ProductBuilder#get"><a href="ec.ProductBuilder.html#ProductBuilder#get">ProductBuilder#get</a></li>
            
                <li data-name="ec.ProductBuilder.ProductBuilder#update"><a href="ec.ProductBuilder.html#ProductBuilder#update">ProductBuilder#update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ec.PurchaseHistoryBuilder">
            <span class="title">
                <a href="ec.PurchaseHistoryBuilder.html">ec.PurchaseHistoryBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ec.PurchaseHistoryBuilder.PurchaseHistoryBuilder#get"><a href="ec.PurchaseHistoryBuilder.html#PurchaseHistoryBuilder#get">PurchaseHistoryBuilder#get</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="ec.PurchaseIdBuilder">
            <span class="title">
                <a href="ec.PurchaseIdBuilder.html">ec.PurchaseIdBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="ec.PurchaseIdBuilder.PurchaseIdBuilder#get"><a href="ec.PurchaseIdBuilder.html#PurchaseIdBuilder#get">PurchaseIdBuilder#get</a></li>
            
                <li data-name="ec.PurchaseIdBuilder.PurchaseIdBuilder#getWhenCompleted"><a href="ec.PurchaseIdBuilder.html#PurchaseIdBuilder#getWhenCompleted">PurchaseIdBuilder#getWhenCompleted</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="evci.EventBuilder">
            <span class="title">
                <a href="evci.EventBuilder.html">evci.EventBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="evci.EventBuilder.EventBuilder#publish"><a href="evci.EventBuilder.html#EventBuilder#publish">EventBuilder#publish</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="iam.TokenBuilder">
            <span class="title">
                <a href="iam.TokenBuilder.html">iam.TokenBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="iam.TokenBuilder.TokenBuilder#create"><a href="iam.TokenBuilder.html#TokenBuilder#create">TokenBuilder#create</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="iam.UserBuilder">
            <span class="title">
                <a href="iam.UserBuilder.html">iam.UserBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="iam.UserBuilder.UserBuilder#addIdentity"><a href="iam.UserBuilder.html#UserBuilder#addIdentity">UserBuilder#addIdentity</a></li>
            
                <li data-name="iam.UserBuilder.UserBuilder#delete"><a href="iam.UserBuilder.html#UserBuilder#delete">UserBuilder#delete</a></li>
            
                <li data-name="iam.UserBuilder.UserBuilder#get"><a href="iam.UserBuilder.html#UserBuilder#get">UserBuilder#get</a></li>
            
                <li data-name="iam.UserBuilder.UserBuilder#update"><a href="iam.UserBuilder.html#UserBuilder#update">UserBuilder#update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="iam.UsersBuilder">
            <span class="title">
                <a href="iam.UsersBuilder.html">iam.UsersBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="iam.UsersBuilder.UsersBuilder#create"><a href="iam.UsersBuilder.html#UsersBuilder#create">UsersBuilder#create</a></li>
            
                <li data-name="iam.UsersBuilder.UsersBuilder#get"><a href="iam.UsersBuilder.html#UsersBuilder#get">UsersBuilder#get</a></li>
            
                <li data-name="iam.UsersBuilder.UsersBuilder#getMe"><a href="iam.UsersBuilder.html#UsersBuilder#getMe">UsersBuilder#getMe</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="oauth.AuthorizationBuilder">
            <span class="title">
                <a href="oauth.AuthorizationBuilder.html">oauth.AuthorizationBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="oauth.AuthorizationBuilder.AuthorizationBuilder#dialog"><a href="oauth.AuthorizationBuilder.html#AuthorizationBuilder#dialog">AuthorizationBuilder#dialog</a></li>
            
                <li data-name="oauth.AuthorizationBuilder.AuthorizationBuilder#login"><a href="oauth.AuthorizationBuilder.html#AuthorizationBuilder#login">AuthorizationBuilder#login</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="oauth.TokenBuilder">
            <span class="title">
                <a href="oauth.TokenBuilder.html">oauth.TokenBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="oauth.TokenBuilder.TokenBuilder#get"><a href="oauth.TokenBuilder.html#TokenBuilder#get">TokenBuilder#get</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="oauth.UserBuilder">
            <span class="title">
                <a href="oauth.UserBuilder.html">oauth.UserBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="oauth.UserBuilder.UserBuilder#create"><a href="oauth.UserBuilder.html#UserBuilder#create">UserBuilder#create</a></li>
            
                <li data-name="oauth.UserBuilder.UserBuilder#sendResetPasswordEmail"><a href="oauth.UserBuilder.html#UserBuilder#sendResetPasswordEmail">UserBuilder#sendResetPasswordEmail</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="oauth.UserMeBuilder">
            <span class="title">
                <a href="oauth.UserMeBuilder.html">oauth.UserMeBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="oauth.UserMeBuilder.UserMeBuilder#deleteMe"><a href="oauth.UserMeBuilder.html#UserMeBuilder#deleteMe">UserMeBuilder#deleteMe</a></li>
            
                <li data-name="oauth.UserMeBuilder.UserMeBuilder#getMe"><a href="oauth.UserMeBuilder.html#UserMeBuilder#getMe">UserMeBuilder#getMe</a></li>
            
                <li data-name="oauth.UserMeBuilder.UserMeBuilder#sendValidateEmail"><a href="oauth.UserMeBuilder.html#UserMeBuilder#sendValidateEmail">UserMeBuilder#sendValidateEmail</a></li>
            
                <li data-name="oauth.UserMeBuilder.UserMeBuilder#updateMe"><a href="oauth.UserMeBuilder.html#UserMeBuilder#updateMe">UserMeBuilder#updateMe</a></li>
            
                <li data-name="oauth.UserMeBuilder.UserMeBuilder#validateEmail"><a href="oauth.UserMeBuilder.html#UserMeBuilder#validateEmail">UserMeBuilder#validateEmail</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="resources.CollectionBuilder">
            <span class="title">
                <a href="resources.CollectionBuilder.html">resources.CollectionBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="resources.CollectionBuilder.CollectionBuilder#add"><a href="resources.CollectionBuilder.html#CollectionBuilder#add">CollectionBuilder#add</a></li>
            
                <li data-name="resources.CollectionBuilder.CollectionBuilder#get"><a href="resources.CollectionBuilder.html#CollectionBuilder#get">CollectionBuilder#get</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="resources.RelationBuilder">
            <span class="title">
                <a href="resources.RelationBuilder.html">resources.RelationBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="resources.RelationBuilder.RelationBuilder#add"><a href="resources.RelationBuilder.html#RelationBuilder#add">RelationBuilder#add</a></li>
            
                <li data-name="resources.RelationBuilder.RelationBuilder#delete"><a href="resources.RelationBuilder.html#RelationBuilder#delete">RelationBuilder#delete</a></li>
            
                <li data-name="resources.RelationBuilder.RelationBuilder#get"><a href="resources.RelationBuilder.html#RelationBuilder#get">RelationBuilder#get</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="resources.ResourceBuilder">
            <span class="title">
                <a href="resources.ResourceBuilder.html">resources.ResourceBuilder</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="resources.ResourceBuilder.ResourceBuilder#delete"><a href="resources.ResourceBuilder.html#ResourceBuilder#delete">ResourceBuilder#delete</a></li>
            
                <li data-name="resources.ResourceBuilder.ResourceBuilder#get"><a href="resources.ResourceBuilder.html#ResourceBuilder#get">ResourceBuilder#get</a></li>
            
                <li data-name="resources.ResourceBuilder.ResourceBuilder#update"><a href="resources.ResourceBuilder.html#ResourceBuilder#update">ResourceBuilder#update</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        <li class="item" data-name="SilkRoadError">
            <span class="title">
                <a href="SilkRoadError.html">SilkRoadError</a>
                
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li data-name="SilkRoadError.create"><a href="SilkRoadError.html#create">create</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        <h1 class="page-title" data-filename="user.js.html">Source: engine/user.js</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source"><code>'use strict';
/* global define */
define([
    'corejs/app',
    'jquery',
    'underscore',
    'q',
    'corejs/engine/session',
    'corejs/engine/silkroad/oauth',
    'corejs/engine/silkroad/iam',
    'corejs/engine/validate',

    // supported oauthServices
    'corejs/engine/oauthServices/oauthServer'

], function(app, $, _, q, session, oauth, iam, validate) {

    
    /** 
     * A module to manage users
     * @exports user
     * @namespace
     * @memberof app
     */
    var user = {

        /**
         * HTTP status codes constants
         * @namespace
         */
        statusCode: {

            /**
             * USER_EXIST constant
             * @constant
             * @type {String}
             * @default
             */
            USER_EXIST: 409
        }
    };

    /**
     * Autenticates users
     * @param  {Object} args
     * @param  {String} args.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
     * @param  {String} [args.method='popup'] Process type for oauth service ('popup' or 'redirect')
     * @param  {String} args.username For silkroad-oauthServer-based users
     * @param  {String} args.password For silkroad-oauthServer-based users
     * @param  {Boolean} [args.remember=false] For persistent login
     * @fires oauth:service:login:[args.oauthService]
     * @return {Promise} Promise that resolves with an user object
     */
    user.login = function(args) {
        args = args || {};
        validate.isValue(args.oauthService, 'missing oauthService params');

        /**
         * Requests a handler for login in a specific oauthServer
         * @event oauth:service:login:[args.oauthService]
         * @type {Backbone.Wreqr.RequestResponse}
         * @param  {Object} args
         * @param  {String} args.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
         * @param  {String} [args.method='popup'] Process type for oauth service ('popup' or 'redirect')
         * @param  {String} args.username For silkroad-oauthServer-based users
         * @param  {String} args.password For silkroad-oauthServer-based users
         * @param  {Boolean} args.remember For persistent login
         * @return {Promise} Promise that resolves with an user object
         */
        return app.reqres.request('oauth:service:login:' + args.oauthService, args)
        .then(function(data) {
            app.vent.trigger('user:login');
            app.log.debug('user.oauth.data', data);

            args.accessToken = data.accessToken;

            return user.loginToken(args);
        });
    };

    /**
     * Generates a user session with a valid user accessToken
     * @param  {Object} args
     * @param  {String} args.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
     * @param  {String} args.accessToken Valid user accessToken
     * @param  {Boolean} [args.remember=false] For persistent login
     * @return {Promise} Promise that resolves with an user object
     */
    user.loginToken = function(args) {
        args = args || {};
        validate.isValue(args.oauthService, 'missing oauthService params');
        validate.isValue(args.accessToken, 'missing accessToken params');

        session.logged({
            persistent: args.remember,
            accessToken: args.accessToken,
            oauthService: args.oauthService,
            user: {}
        });

        return iam.user().getMe()
        .then(function(data) {
            session.logged({
                persistent: args.remember,
                accessToken: args.accessToken,
                oauthService: args.oauthService,
                user: data
            });
            return data;
        }).fail(function(error) {
            app.log.error('user:login:iam:fail', error);
            app.vent.trigger('user:iam:fail',error);
            app.log.info('login:fail');

            throw error;
        });
    };

    /**
     * Triggers a system logout
     * @return {Promise} Returns Promise for more user consistency
     */
    user.logout = function() {
        app.vent.trigger('user:logout');
        app.log.debug('user.logout: ', 'oauth:service:logout:' + session.get('oauthService'));
        /**
         * Request a handler for logout in a specific oauthServer
         * @name oauth:service:logout:[oauthServer]
         * @event
         */
        app.vent.trigger('oauth:service:logout:' + session.get('oauthService'));
        session.destroy();
        
        var dfd = q.defer();
        dfd.resolve();
        return dfd.promise;
    };

    /**
     * Request an oauth user object
     * @param  {Object} args
     * @param  {String} args.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
     * @param  {String} [args.method="popup"]
     * @return {Promise} Promise that resolves with an user object
     */
    user.me = function(args) {
        args = args || {};
        validate.isValue(args.oauthService, 'missing oauthService params');

        /**
         * Requests a handler for request logged user data from a specific oauthServer
         * @param  {Object} args
         * @param  {Object} args.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
         * @return {Promise}
         * @name oauth:service:me:[oauthServer]
         * @event
         */
        return app.reqres.request('oauth:service:me:' + args.oauthService, args).then(function(oauthUser) {
            app.log.debug('user.me.then', oauthUser);
            return oauthUser;
        }).fail(function(error) {
            app.log.error('user.me.error', error);
            throw error;
        });

    };

    /**
     * Registers a new user
     * @param  {Object} args
     * @param  {Object} args.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
     * @param  {Object} args.email For silkroad-oauthServer-based users
     * @param  {Object} args.username For silkroad-oauthServer-based users
     * @param  {Object} args.firstName For silkroad-oauthServer-based users
     * @param  {Object} args.lastName For silkroad-oauthServer-based users
     * @param  {Object} args.password For silkroad-oauthServer-based users
     *
     * @return {Promise}
     */
    user.register = function(args) {
        args = args || {};
        validate.isValue(args.oauthService, 'missing oauthService params');

        /**
         * Requests a handler for register in a specific oauthServer
         * @param  {Object} args
         * @param  {Object} args.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
         * @return {Promise}
         * @name oauth:service:register:[oauthServer]
         * @event
         */
        return app.reqres.request('oauth:service:register:' + args.oauthService, args)
        .then(function(oauthUser) {
            return user.registerIAM(oauthUser);
        })
        .then(function(data) {
            app.log.info('user.register.success', data);
            return data;
        })
        .fail(function(error) {
            app.log.error('user.register.error', error);
            throw error;
        });
    };

    /**
     * Registers an oauthUser in IAM
     * @param  {Object} oauthUser
     * @param  {Object} oauthUser.oauthId Id of the oauth user
     * @param  {Object} oauthUser.oauthService Name of the oauth service ('silkroad', 'facebook', 'google', ...)
     * @param  {Object} oauthUser.email For silkroad-oauthServer-based users
     * @param  {Object} oauthUser.username For silkroad-oauthServer-based users
     * @param  {Object} oauthUser.firstName For silkroad-oauthServer-based users
     * @param  {Object} oauthUser.lastName For silkroad-oauthServer-based users
     * @param  {Object} oauthUser.password For silkroad-oauthServer-based users
     * @return {Promise}
     */
    user.registerIAM = function(oauthUser) {
        oauthUser = oauthUser || {};
        validate.isValue(oauthUser.oauthId, 'missing oauthId params');
        validate.isValue(oauthUser.oauthService, 'missing oauthService params');
        validate.isValue(oauthUser.email, 'missing email params');
        validate.isValue(oauthUser.username, 'missing username params');
        validate.isValue(oauthUser.firstName, 'missing firstName params');
        validate.isValue(oauthUser.lastName, 'missing lastName params');
        validate.isValue(oauthUser.password, 'missing password params');


        var oauthId = oauthUser.oauthId;
        var oauthService = oauthUser.oauthService;
        app.log.debug('user.registerIAM', oauthUser);
        oauthUser.scopes = app.common.get('claimScopesRegister');
        return iam.user().create(_.omit(oauthUser, ['oauthId', 'oauthService'])).then(function(id) {
            return iam.user(id).addIdentity({
                oauthService: oauthService,
                oauthId: oauthId
            });
        }).fail(function(error) {
            app.log.error('user.registerIAM.error', error);
            if (error.httpStatus === user.statusCode.USER_EXIST) {
                app.log.warn('user:register:exist');
                app.vent.trigger('user:register:exist');
            }

            throw error;
        });
    };

    /**
     * Removes user
     * @param  {Object} args
     * @param  {Object} [args.oauthService=app.common.get('oauthService')] Name of the oauth service ('silkroad', 'facebook', 'google', ...)
     * @return {Promise}
     */
    user.remove = function(args) {
        args = args || {};
        args.oauthService = session.get('oauthService') || args.oauthService || app.common.get('oauthService');
        return app.reqres.request('oauth:service:remove:' + args.oauthService).then(function() {
            return iam.user(session.get('user').id).delete();
        });
    };

    // Exposes module
    app.user = user;

    return user;

});</code></pre>
        </article>
    </section>





        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Fri Apr 11 2014 16:02:02 GMT+0200 (CEST)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
<script src="scripts/main.js"></script>
</body>
</html>